"use strict";(self.webpackChunkinterview=self.webpackChunkinterview||[]).push([[9],{4009:function(e,n,i){i.r(n),i.d(n,{default:function(){return V}});var t=i(9439),l=i(2791),s=i(9434),a=i(8334),o="styles_blogListContainer__-khGe",r="styles_blogListWrap__ASag-",d="styles_blogItem__Dar-W",c="styles_actionWrap__WwDDl",u="styles_delete__+xZ+i",v="styles_loadingContainer__DPl+C",h="styles_filterContainer__iqeGr",m=i(5345),p=i(4165),f=i(5861),j=i(3188),x=i(3695),_=i(7138),Z=i(9553),g=i(8678),b=i(7309),y=i(3272),C="styles_modal__wdOpL",w="styles_groupButton__a4s07",N="styles_imageShow__V2FrR",I="styles_uploadWrap__nt2hM",S="styles_addImage__jMlix",F=i(184);function E(e){var n=e.visible,i=e.onCancel,s=e.data,a=e.reload,o=(0,l.useState)(),r=(0,t.Z)(o,2),d=r[0],c=r[1],u=(0,l.useState)(!1),v=(0,t.Z)(u,2),h=v[0],E=v[1],T=(0,l.useState)(!1),k=(0,t.Z)(T,2),O=k[0],P=k[1],W=j.Z.useForm(),D=(0,t.Z)(W,1)[0];(0,l.useEffect)((function(){var e;s&&(c(null===s||void 0===s||null===(e=s.image)||void 0===e?void 0:e.url),D.setFieldsValue({title:null===s||void 0===s?void 0:s.title,content:null===s||void 0===s?void 0:s.content}))}),[s]);var L=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(n){var t;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(!0),(t=new FormData).append("blog[title]",null===n||void 0===n?void 0:n.title),t.append("blog[content]",null===n||void 0===n?void 0:n.content),h&&t.append("blog[image]",null===n||void 0===n?void 0:n.img),(0,m.zZ)({id:null===s||void 0===s?void 0:s.id,data:t}).then((function(){i(),P(!1),x.ZP.success("Update Success !"),a()})).catch((function(){P(!1),x.ZP.error("Update Fail !")}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,F.jsx)(_.Z,{className:C,visible:n,onCancel:i,title:"EDIT BLOG",children:(0,F.jsxs)(j.Z,{onFinish:L,form:D,children:[(0,F.jsx)(j.Z.Item,{name:"img",children:(0,F.jsx)(Z.Z,{onChange:function(e){var n,i;(0,y.y)(null===e||void 0===e||null===(n=e.file)||void 0===n?void 0:n.originFileObj,(function(e){return c(e)})),D.setFieldsValue({img:null===e||void 0===e||null===(i=e.file)||void 0===i?void 0:i.originFileObj}),E(!0)},showUploadList:!1,className:I,children:d?(0,F.jsx)("img",{alt:"avatar",className:N,src:d}):(0,F.jsx)("p",{className:S,children:"Add Image"})})}),(0,F.jsx)(j.Z.Item,{name:"title",rules:[{required:!0,message:"Please input your title!"}],children:(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{children:"Title"}),(0,F.jsx)(g.Z,{disabled:O,value:j.Z.useWatch("title",D),placeholder:"Input title"})]})}),(0,F.jsx)(j.Z.Item,{name:"content",rules:[{required:!0,message:"Please input your content!"}],children:(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{children:"Content"}),(0,F.jsx)(g.Z,{disabled:O,value:j.Z.useWatch("content",D),placeholder:"Input content"})]})}),(0,F.jsxs)("div",{className:w,children:[(0,F.jsx)(b.Z,{onClick:i,children:"Cancel"}),(0,F.jsx)(b.Z,{htmlType:"submit",loading:O,children:"OK"})]})]})})}var T=i(912),k=i(7083),O=i(9167),P="styles_modal__znoTo",W="styles_groupButton__sQUFw",D="styles_imageShow__HzqGf",L="styles_uploadWrap__hOJA7",U="styles_addImage__bWYE+";function A(e){var n=e.visible,i=e.onCancel,s=e.reload,a=(0,l.useState)(),o=(0,t.Z)(a,2),r=o[0],d=o[1],c=(0,l.useState)(!1),u=(0,t.Z)(c,2),v=u[0],h=u[1],C=(0,l.useState)(!1),w=(0,t.Z)(C,2),N=w[0],I=w[1],S=j.Z.useForm(),E=(0,t.Z)(S,1)[0],T=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(n){var t;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(!0),(t=new FormData).append("blog[title]",null===n||void 0===n?void 0:n.title),t.append("blog[content]",null===n||void 0===n?void 0:n.content),v&&t.append("blog[image]",null===n||void 0===n?void 0:n.img),(0,m.Vh)(t).then((function(){i(),I(!1),x.ZP.success("Update Success !"),s()})).catch((function(){I(!1),x.ZP.error("Update Fail !")}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,F.jsx)(_.Z,{className:P,visible:n,onCancel:i,title:"CREATE BLOG",children:(0,F.jsxs)(j.Z,{onFinish:T,form:E,children:[(0,F.jsx)(j.Z.Item,{name:"img",children:(0,F.jsx)(Z.Z,{onChange:function(e){var n,i;(0,y.y)(null===e||void 0===e||null===(n=e.file)||void 0===n?void 0:n.originFileObj,(function(e){return d(e)})),E.setFieldsValue({img:null===e||void 0===e||null===(i=e.file)||void 0===i?void 0:i.originFileObj}),h(!0)},showUploadList:!1,className:L,children:r?(0,F.jsx)("img",{alt:"avatar",className:D,src:r}):(0,F.jsx)("p",{className:U,children:"Add Image"})})}),(0,F.jsx)(j.Z.Item,{name:"title",rules:[{required:!0,message:"Please input your title!"}],children:(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{children:"Title"}),(0,F.jsx)(g.Z,{disabled:N,placeholder:"Input title"})]})}),(0,F.jsx)(j.Z.Item,{name:"content",rules:[{required:!0,message:"Please input your content!"}],children:(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{children:"Content"}),(0,F.jsx)(g.Z,{disabled:N,placeholder:"Input content"})]})}),(0,F.jsxs)("div",{className:W,children:[(0,F.jsx)(b.Z,{onClick:i,children:"Cancel"}),(0,F.jsx)(b.Z,{htmlType:"submit",loading:N,children:"OK"})]})]})})}var B=[{label:"id",value:"id"},{label:"title",value:"title"},{label:"content",value:"content"},{label:"created_at",value:"created_at"},{label:"updated_at",value:"updated_at"}],R=[{label:"asc",value:"asc"},{label:"desc",value:"desc"}];function V(){var e,n=(0,s.I0)(),i=(0,s.v9)((function(e){return e.blogReducer})),p=i.loading,f=i.listBlog,x=(0,l.useState)([]),_=(0,t.Z)(x,2),Z=_[0],y=_[1],C=(0,l.useState)(!1),w=(0,t.Z)(C,2),N=w[0],I=w[1],S=(0,l.useState)(),P=(0,t.Z)(S,2),W=P[0],D=P[1],L=(0,l.useState)(1),U=(0,t.Z)(L,2),V=U[0],q=U[1],z=(0,l.useState)(!1),G=(0,t.Z)(z,2),M=G[0],K=G[1],H=j.Z.useForm(),J=(0,t.Z)(H,1)[0],Q=j.Z.useWatch("search",J),X=j.Z.useWatch("sort_by",J),Y=j.Z.useWatch("sort_direction",J),$=function(){var e={page:V,search:Q,sort_by:X,sort_direction:Y};n((0,a.Pt)(e)).then((function(){return window.scrollTo({top:0,behavior:"auto"})}))},ee=function(){var e={page:1,search:Q,sort_by:X,sort_direction:Y};n((0,a.Pt)(e)).then((function(){q(1),window.scrollTo({top:0,behavior:"auto"})}))};(0,l.useEffect)((function(){var e,n;J.setFieldsValue({sort_by:null===B||void 0===B||null===(e=B[3])||void 0===e?void 0:e.value,sort_direction:null===R||void 0===R||null===(n=R[1])||void 0===n?void 0:n.value})}),[]),(0,l.useEffect)((function(){var e,n;y((null===f||void 0===f||null===(e=f.data)||void 0===e?void 0:e.items)||[]),q(null===f||void 0===f||null===(n=f.pagination)||void 0===n?void 0:n.page)}),[f]),(0,l.useEffect)((function(){$()}),[V]),(0,l.useEffect)((function(){var e=setTimeout((function(){ee()}),300);return function(){return clearTimeout(e)}}),[Q,X,Y]);return(0,F.jsxs)("div",{className:o,children:[(0,F.jsxs)(j.Z,{form:J,className:h,children:[(0,F.jsx)(j.Z.Item,{name:"search",children:(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{children:"Search"}),(0,F.jsx)(g.Z,{})]})}),(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{children:"Sort By"}),(0,F.jsx)(j.Z.Item,{name:"sort_by",children:(0,F.jsx)(T.Z,{disabled:p,options:B})})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{children:"Sort Direction"}),(0,F.jsx)(j.Z.Item,{name:"sort_direction",children:(0,F.jsx)(T.Z,{disabled:p,options:R})})]})]}),(0,F.jsx)(b.Z,{onClick:function(){K(!0)},className:"btn btn-primary",loading:p,children:"CREATE BLOG"}),(0,F.jsxs)("ul",{className:r,children:[null===Z||void 0===Z?void 0:Z.map((function(e){var i;return(0,F.jsxs)("li",{className:d,children:[(0,F.jsx)("a",{href:"/test-nal/".concat(null===e||void 0===e?void 0:e.id),children:p?(0,F.jsx)("div",{className:v,children:(0,F.jsx)(k.Z,{size:"large"})}):(0,F.jsx)("img",{src:null===e||void 0===e||null===(i=e.image)||void 0===i?void 0:i.url,className:"mr-3",alt:"..."})}),(0,F.jsxs)("div",{className:"media-body",children:[(0,F.jsx)("h5",{className:"mt-0 mb-1",children:null===e||void 0===e?void 0:e.title}),null===e||void 0===e?void 0:e.content]}),(0,F.jsxs)("div",{className:c,children:[(0,F.jsx)("div",{className:u,onClick:function(){return D(e),void I(!0)},children:"EDIT"}),(0,F.jsx)("div",{className:u,onClick:function(){return i=null===e||void 0===e?void 0:e.id,void(0,m.X4)(i).then((function(){return n((0,a.Pt)())}));var i},children:"REMOVE"})]})]})})),N&&(0,F.jsx)(E,{visible:N,onCancel:function(){return I(!1)},data:W,reload:$})]}),(0,F.jsx)(O.Z,{total:null===f||void 0===f||null===(e=f.pagination)||void 0===e?void 0:e.count,pageSize:20,current:V,onChange:function(e){return q(e)},showSizeChanger:!1}),M&&(0,F.jsx)(A,{visible:M,onCancel:function(){K(!1)},reload:ee})]})}},3272:function(e,n,i){function t(e,n){var i=new FileReader;i.addEventListener("load",(function(){return n(i.result)})),i.readAsDataURL(e)}i.d(n,{y:function(){return t}})}}]);
//# sourceMappingURL=9.2b3f56d6.chunk.js.map